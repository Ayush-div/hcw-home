<div class="dashboard-content">
    @for (card of cards(); track card.title) {
        @if (card.type === 'waiting') {
            <app-consultation-card 
                [title]="card.title" 
                [description]="card.description" 
                [routerLink]="card.routerLink"
                [showInvite]="card.showInvite" 
                [waitingData]="card.waitingData"
                [consultations]="[]"
                (invite)="openInviteSelector()">
            </app-consultation-card>
        }
        @if (card.type === 'open') {
            <app-consultation-card 
                [title]="card.title" 
                [description]="card.description" 
                [routerLink]="card.routerLink"
                [showInvite]="card.showInvite" 
                [consultations]="card.consultations"
                (invite)="openInviteSelector()">
            </app-consultation-card>
        }
    }
</div>

@if (isInviting()) {
<app-invite-form type="remote" (close)="closeInvite()" (submit)="onInviteSubmit($event)">
</app-invite-form>
}

@if (isLoading()) {
<div class="loading-overlay">
    <div class="loading-content">
        <div class="spinner"></div>
        <p>Creating patient and consultation...</p>
    </div>
</div>
}